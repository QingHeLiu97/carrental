<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yubin.mapper.RoleMapper">

    <sql id="RoleColumns">
       role_id AS roleId,
       user_id AS userId,
       user_name AS userName,
       role AS role,
       create_time AS createTime,
       update_time AS updateTime ,
        status AS status
    </sql>

    <insert id="insertNotice" parameterType="com.yubin.entity.Notice">
        INSERT INTO role(
         content,
         autor,
         create_time,
         update_time
        )VALUES (
        #{content},
        #{autor}
        #{createTime}
        #{updateTime}
        )
    </insert>

    <delete id="deleteRoleById">
    update  role set
    status = "1"
    where role_id =#{roleId}
    </delete>

    <update id="updateRole">
        update role set
        <if test="userId !='' and userId !=null " >user_id =#{userId} ,</if>
        <if test="userName !='' and userName !=null " >user_name =#{userName}, </if>
        <if test="role !='' and role !=null " >role =#{role} ,</if>
        <if test="updateTime !='' and updateTime !=null " >update_time =#{updateTime} </if>
    </update>

    <select id="selectAllRole" resultType="com.yubin.entity.Role">
        select
        <include refid="RoleColumns"/>
        from role where status = '0'
    </select>

    <select id="selectRoleByid" resultType="com.yubin.entity.Role">
        select
        <include refid="RoleColumns"/>
        from role where status = '0' and role_id = #{roleId}
    </select>

    <select id="selectRoleRecord" resultType="com.yubin.entity.Role">
        select
        <include refid="RoleColumns"/>
        from role
    </select>

    <select id="ChcekRole" resultType="com.yubin.entity.Role">
        select
        *
        from role where user_name = #{username}
    </select>

</mapper>
